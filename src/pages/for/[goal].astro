---
/**
 * Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ (Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 1 ÑĞµĞ³Ğ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸)
 * /for/intimacy, /for/escapism, /for/connection
 */
import { getCollection } from 'astro:content';
import SiteLayout from '../../layouts/SiteLayout.astro';
import Wrapper from '../../components/Wrapper.astro';
import Space from '../../components/Space.astro';
import Breadcrumbs from '../../components/Breadcrumbs.astro';
import ModelCardSemantic from '../../components/ModelCardSemantic.astro';
import FeatureComparisonTable from '../../components/FeatureComparisonTable.astro';
import CTAButton from '../../components/CTAButton.astro';
import SectionTitle from '../../components/SectionTitle.astro';
import { url } from '../../utils/url';

// ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµĞ¼ Ğ²ÑĞµ Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¸
const motivationsMeta = {
  intimacy: {
    title: 'Ğ˜Ğ½Ñ‚Ğ¸Ğ¼',
    subtitle: 'AI-Ğ´ĞµĞ²ÑƒÑˆĞºĞ¸ Ğ´Ğ»Ñ Ñ€Ğ¾Ğ¼Ğ°Ğ½Ñ‚Ğ¸ĞºĞ¸, ÑĞµĞºÑ-Ñ‡Ğ°Ñ‚Ğ° Ğ¸ Ğ¾Ñ‚ĞºÑ€Ğ¾Ğ²ĞµĞ½Ğ½Ñ‹Ñ… Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¾Ğ²',
    description: 'Ğ¡ĞµÑ€Ğ²Ğ¸ÑÑ‹ Ğ´Ğ»Ñ Ğ²Ğ·Ñ€Ğ¾ÑĞ»Ñ‹Ñ…: Ğ¾Ñ‚ Ğ¼ÑĞ³ĞºĞ¾Ğ¹ Ñ€Ğ¾Ğ¼Ğ°Ğ½Ñ‚Ğ¸ĞºĞ¸ Ğ´Ğ¾ hardcore NSFW. Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸ Ğ¿Ğ¾ ÑĞ²Ğ¾Ğ¸Ğ¼ Ğ¿Ñ€ĞµĞ´Ğ¿Ğ¾Ñ‡Ñ‚ĞµĞ½Ğ¸ÑĞ¼.',
    icon: 'â¤ï¸',
  },
  escapism: {
    title: 'Ğ­ÑĞºĞ°Ğ¿Ğ¸Ğ·Ğ¼',
    subtitle: 'AI-Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ¸ Ğ´Ğ»Ñ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸ĞµĞ², ÑÑĞ¶ĞµÑ‚Ğ¾Ğ² Ğ¸ Ğ¸Ğ¼Ğ¿Ñ€Ğ¾Ğ²Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸',
    description: 'ĞÑ‚ Ğ»Ñ‘Ğ³ĞºĞ¸Ñ… ÑÑ†ĞµĞ½Ğ¾Ğº Ğ´Ğ¾ Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ¸Ñ… ÑÑĞ¶ĞµÑ‚Ğ½Ñ‹Ñ… Ğ°Ñ€Ğ¾Ğº. ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ¸ Ğ¸Ğ· Ğ°Ğ½Ğ¸Ğ¼Ğµ, Ñ„Ğ¸Ğ»ÑŒĞ¼Ğ¾Ğ² Ğ¸Ğ»Ğ¸ Ğ¾Ñ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ.',
    icon: 'ğŸ­',
  },
  connection: {
    title: 'Ğ¡Ğ²ÑĞ·ÑŒ',
    subtitle: 'AI-ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½ÑŒĞ¾Ğ½Ñ‹ Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¾Ğ², Ğ´Ñ€ÑƒĞ¶Ğ±Ñ‹ Ğ¸ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¸',
    description: 'ĞšĞ¾Ğ³Ğ´Ğ° Ğ½ÑƒĞ¶ĞµĞ½ ĞºÑ‚Ğ¾-Ñ‚Ğ¾, ĞºÑ‚Ğ¾ Ğ²Ñ‹ÑĞ»ÑƒÑˆĞ°ĞµÑ‚. Ğ¢ĞµÑ€Ğ°Ğ¿ĞµĞ²Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ±ĞµÑĞµĞ´Ñ‹, ĞµĞ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ğ¾Ğµ Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ, Ğ±Ğ¾Ñ€ÑŒĞ±Ğ° Ñ Ğ¾Ğ´Ğ¸Ğ½Ğ¾Ñ‡ĞµÑÑ‚Ğ²Ğ¾Ğ¼.',
    icon: 'ğŸ¤',
  },
};

// Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµĞ¼ ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¿ÑƒÑ‚Ğ¸
export function getStaticPaths() {
  const motivations = ['intimacy', 'escapism', 'connection'];
  return motivations.map(motivation => ({ params: { goal: motivation } }));
}

const { goal } = Astro.params;
const meta = motivationsMeta[goal as keyof typeof motivationsMeta];

if (!meta) {
  return Astro.redirect('/404');
}

// ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ Ğ´Ğ»Ñ ÑÑ‚Ğ¾Ğ¹ Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¸
const allModels = await getCollection('models');
type MotivationType = 'intimacy' | 'escapism' | 'connection';
const motivationTyped = goal as MotivationType;
const models = allModels
  .map(entry => ({ slug: entry.id.replace('.yaml', ''), ...entry.data }))
  .filter(m => m.motivation === motivationTyped || m.motivationSupport?.includes(motivationTyped))
  .sort((a, b) => b.rating - a.rating);

// Ğ›ÑƒÑ‡ÑˆĞ¸Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ´Ğ»Ñ ÑÑ‚Ğ¾Ğ¹ Ñ†ĞµĞ»Ğ¸
const topPick = models[0];

// Breadcrumbs
const breadcrumbs = [
  { label: 'Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ', href: url('/') },
  { label: meta.title }
];
---

<SiteLayout 
  title={`${meta.title} â€” AI-Ğ´ĞµĞ²ÑƒÑˆĞºĞ¸ | AIGirlsHub`}
  description={meta.subtitle}
>
  <Wrapper>
    <Space size="L" />
    <Breadcrumbs items={breadcrumbs} />
    
    <!-- Hero -->
    <section class="goal-hero">
      <span class="goal-hero__icon">{meta.icon}</span>
      <h1>{meta.title}</h1>
      <p class="goal-hero__subtitle">{meta.subtitle}</p>
      <p class="goal-hero__desc">{meta.description}</p>
    </section>
  </Wrapper>

  <Space size="XL" />

  <!-- Ğ›ÑƒÑ‡ÑˆĞ¸Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€ -->
  {topPick && (
    <Wrapper>
      <section class="top-pick">
        <div class="top-pick__badge">Ğ›ÑƒÑ‡ÑˆĞ¸Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€</div>
        <div class="top-pick__content">
          <div class="top-pick__info">
            <h2 class="top-pick__name">{topPick.name}</h2>
            <p class="top-pick__tagline">{topPick.tagline || topPick.description}</p>
            <div class="top-pick__meta">
              <span class="top-pick__rating">â˜… {topPick.rating.toFixed(1)}</span>
              <span class="top-pick__price">
                {topPick.pricing === 'free' ? 'Ğ‘ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾' : topPick.priceFrom ? `Ğ¾Ñ‚ $${topPick.priceFrom}/Ğ¼ĞµÑ` : 'Freemium'}
              </span>
            </div>
          </div>
          <div class="top-pick__actions">
            <CTAButton href={url(`/models/${topPick.slug}`)} text="ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ" external={false} />
            <CTAButton href={topPick.affiliateUrl} text="ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±Ğ¾Ğ²Ğ°Ñ‚ÑŒ â†’" variant="primary" />
          </div>
        </div>
      </section>
    </Wrapper>
  )}

  <Space size="XL" />

  <!-- Ğ¢Ğ¾Ğ¿-4 ÑĞµÑ€Ğ²Ğ¸ÑĞ° Ğ´Ğ»Ñ ÑÑ‚Ğ¾Ğ¹ Ñ†ĞµĞ»Ğ¸ -->
  <Wrapper>
    <section class="goal-models">
      <SectionTitle size="small" subtitle={`Ğ¢Ğ¾Ğ¿-${Math.min(4, models.length)} Ğ¸Ğ· ${models.length}`}>Ğ›ÑƒÑ‡ÑˆĞ¸Ğµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ Ğ´Ğ»Ñ {meta.title.toLowerCase()}</SectionTitle>
      
      <div class="goal-models__grid">
        {models.slice(0, 4).map(model => (
          <ModelCardSemantic model={model} showCTA={true} />
        ))}
      </div>
      
      {models.length > 4 && (
        <div class="goal-models__more">
          <a href={url('/catalog')}>ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ²ÑĞµ {models.length} ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ² â†’</a>
        </div>
      )}
    </section>
  </Wrapper>

  <Space size="XL" />

  <!-- Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° ÑÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ñ Ğ´Ğ»Ñ ÑÑ‚Ğ¾Ğ¹ Ñ†ĞµĞ»Ğ¸ -->
  <Wrapper>
    <section class="goal-comparison">
      <SectionTitle size="small" subtitle="Ğ’ÑĞµ Ñ„Ğ¸Ñ‡Ğ¸ Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¹ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğµ â€” Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°Ğ¹ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾">Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²</SectionTitle>
      <FeatureComparisonTable models={models.slice(0, 3)} />
      {models.length > 3 && (
        <div class="goal-comparison__more">
          <a href={url('/compare')}>Ğ¡Ñ€Ğ°Ğ²Ğ½Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ â†’</a>
        </div>
      )}
    </section>
  </Wrapper>

  <Space size="XL" />

  <!-- CTA -->
  <Wrapper>
    <section class="goal-cta">
      <p>ĞĞµ Ğ½Ğ°ÑˆÑ‘Ğ» Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ÑÑ‰Ğ¸Ğ¹?</p>
      <CTAButton href={url('/catalog')} text="Ğ¡Ğ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ²ĞµÑÑŒ ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³" external={false} size="L" />
    </section>
  </Wrapper>

  <Space size="XL" />
</SiteLayout>

<style>
  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     GOAL HERO
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .goal-hero {
    text-align: center;
    max-width: 600px;
    margin: 0 auto;
  }

  .goal-hero__icon {
    font-size: 3em;
    display: block;
    margin-bottom: var(--ids__space-m);
  }

  .goal-hero h1 {
    margin: 0;
    font-size: var(--ids__font-size-hero-mobile);
    font-weight: var(--ids__font-weight-heavy);
  }

  .goal-hero__subtitle {
    margin: var(--ids__space-s) 0 0;
    font-size: var(--ids__font-size-h3);
    color: var(--ids__text-secondary);
  }

  .goal-hero__desc {
    margin: var(--ids__space-m) 0 0;
    color: var(--ids__text-tertiary);
    line-height: var(--ids__line-height-relaxed);
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     TOP PICK
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .top-pick {
    padding: var(--ids__space-xl);
    background: var(--ids__bg-surface);
    border-radius: var(--ids__radius-l);
    border: 2px solid var(--ids__accent);
  }

  .top-pick__badge {
    display: inline-block;
    font-size: var(--ids__font-size-caption);
    font-weight: var(--ids__font-weight-bold);
    color: var(--ids__accent);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: var(--ids__space-m);
  }

  .top-pick__content {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: var(--ids__space-xl);
  }

  .top-pick__info {
    flex: 1;
  }

  .top-pick__name {
    margin: 0;
    font-size: var(--ids__font-size-h2);
    font-weight: var(--ids__font-weight-bold);
  }

  .top-pick__tagline {
    margin: var(--ids__space-xs) 0 0;
    color: var(--ids__text-secondary);
    line-height: var(--ids__line-height-relaxed);
  }

  .top-pick__meta {
    display: flex;
    gap: var(--ids__space-m);
    margin-top: var(--ids__space-m);
  }

  .top-pick__rating {
    font-weight: var(--ids__font-weight-bold);
  }

  .top-pick__price {
    color: var(--ids__text-tertiary);
  }

  .top-pick__actions {
    display: flex;
    gap: var(--ids__space-s);
    flex-shrink: 0;
  }

  @media (width < 700px) {
    .top-pick__content {
      flex-direction: column;
    }
    
    .top-pick__actions {
      width: 100%;
    }
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     GOAL MODELS
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

  .goal-models__grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--ids__space-m);
  }

  @media (width < 800px) {
    .goal-models__grid {
      grid-template-columns: 1fr;
    }
  }

  .goal-models__more {
    margin-top: var(--ids__space-l);
    text-align: center;
  }

  .goal-models__more a {
    font-weight: var(--ids__font-weight-semibold);
    color: var(--ids__accent);
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     GOAL COMPARISON
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

  .goal-comparison__more {
    margin-top: var(--ids__space-l);
    text-align: center;
  }

  .goal-comparison__more a {
    font-weight: var(--ids__font-weight-semibold);
    color: var(--ids__accent);
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     GOAL CTA
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .goal-cta {
    text-align: center;
  }

  .goal-cta p {
    margin: 0 0 var(--ids__space-m);
    color: var(--ids__text-secondary);
  }
</style>

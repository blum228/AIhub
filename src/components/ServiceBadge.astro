---
/**
 * ServiceBadge ‚Äî –±–µ–π–¥–∂ –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–µ—Ä–≤–∏—Å–∞
 * 
 * Requirements: 3.3, 3.4, 3.5, 3.6, 10.1, 10.2
 * - Free (–∑–µ–ª—ë–Ω—ã–π), 18+ (–∫—Ä–∞—Å–Ω—ã–π), –ü–∞–º—è—Ç—å (—Å–∏–Ω–∏–π), –ú–∏—Ä (–∑–µ–ª—ë–Ω—ã–π —Å –∏–∫–æ–Ω–∫–æ–π)
 * - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç IDS —Ç–æ–∫–µ–Ω—ã
 * - .badge--nsfw —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ Safe Mode
 */

interface Props {
  type: 'free' | 'nsfw' | 'memory' | 'mir' | 'russian' | 'voice' | 'telegram' | 'dead' | 'censored' | 'crypto' | 'sbp';
}

const { type } = Astro.props;

const badgeConfig: Record<string, { label: string; color: string; hideInSafeMode?: boolean; icon?: string }> = {
  free: { label: 'Free', color: 'var(--ids__success)' },
  nsfw: { label: '18+', color: 'var(--ids__error)', hideInSafeMode: true },
  memory: { label: '–ü–∞–º—è—Ç—å', color: 'var(--ids__link)' },
  mir: { label: '–ú–∏—Ä', color: '#4CAF50', icon: 'üí≥' },
  sbp: { label: '–°–ë–ü', color: '#4CAF50', icon: 'üì±' },
  crypto: { label: '–ö—Ä–∏–ø—Ç–æ', color: '#F7931A', icon: '‚Çø' },
  russian: { label: 'RU', color: 'var(--ids__text-secondary)' },
  voice: { label: '–ì–æ–ª–æ—Å', color: 'var(--ids__warning)', icon: 'üé§' },
  telegram: { label: 'TG', color: '#0088cc', icon: '‚úàÔ∏è' },
  dead: { label: '–ó–∞–∫—Ä—ã—Ç', color: 'var(--ids__text-muted)' },
  censored: { label: '–¶–µ–Ω–∑—É—Ä–∞', color: 'var(--ids__text-muted)' },
};

const config = badgeConfig[type] || { label: type, color: 'var(--ids__text-muted)' };
const badgeClass = config.hideInSafeMode ? 'badge badge--nsfw' : 'badge';
---

<span class={badgeClass} style={`--badge-color: ${config.color}`}>
  {config.icon && <span class="badge__icon">{config.icon}</span>}
  {config.label}
</span>

<style>
  .badge {
    display: inline-flex;
    align-items: center;
    gap: 3px;
    padding: 3px 7px;
    font-size: 11px;
    font-weight: 600;
    line-height: 1;
    color: var(--badge-color);
    background: color-mix(in srgb, var(--badge-color) 15%, transparent);
    border-radius: 4px;
    white-space: nowrap;
  }

  .badge__icon {
    font-size: 10px;
  }

  /* Safe Mode: —Å–∫—Ä—ã–≤–∞–µ–º NSFW –±–µ–π–¥–∂–∏ */
  :global(body.safe-mode) .badge--nsfw {
    display: none;
  }
</style>

---
/**
 * Hero-секция страницы модели
 */
import RatingStars from './RatingStars.astro';
import PriceBadge from './PriceBadge.astro';
import FeatureBadge from './FeatureBadge.astro';
import CTAButton from './CTAButton.astro';
import Space from './Space.astro';

interface Props {
  name: string;
  logo?: string;
  rating: number;
  pricing: 'free' | 'freemium' | 'paid';
  priceFrom?: number;
  description: string;
  affiliateUrl: string;
  features?: {
    voice?: boolean;
    nsfw?: boolean;
    russian?: boolean;
    imageGen?: boolean;
    roleplay?: boolean;
  };
  class?: string;
}

const { 
  name, 
  logo, 
  rating, 
  pricing, 
  priceFrom,
  description, 
  affiliateUrl,
  features,
  class: className 
} = Astro.props;

const classes = ['ids__model-hero', className].filter(Boolean).join(' ');

// Собираем активные фичи
const activeFeatures: string[] = [];
if (features?.voice) activeFeatures.push('voice');
if (features?.nsfw) activeFeatures.push('nsfw');
if (features?.russian) activeFeatures.push('russian');
if (features?.imageGen) activeFeatures.push('image-gen');
if (features?.roleplay) activeFeatures.push('roleplay');
---

<div class={classes}>
  <div class="ids__model-hero-left">
    {logo ? (
      <img src={logo} alt={name} class="ids__model-hero-logo" />
    ) : (
      <div class="ids__model-hero-logo ids__model-hero-logo--placeholder">
        {name.charAt(0)}
      </div>
    )}
  </div>
  
  <div class="ids__model-hero-right">
    <div class="ids__model-hero-header">
      <h1 class="ids__model-hero-name">{name}</h1>
      <RatingStars rating={rating} />
    </div>
    
    <p class="ids__model-hero-desc">{description}</p>
    
    <div class="ids__model-hero-meta">
      <PriceBadge pricing={pricing} priceFrom={priceFrom} />
      {activeFeatures.map(feature => (
        <FeatureBadge type={feature as any} />
      ))}
    </div>
    
    <Space size="M" />
    
    <div class="ids__model-hero-actions">
      <CTAButton href={affiliateUrl} text="Перейти на сайт" size="L" />
    </div>
  </div>
</div>

<style>
  .ids__model-hero {
    display: flex;
    gap: var(--ids__space-l);
    align-items: flex-start;
  }

  @media (width < 600px) {
    .ids__model-hero {
      flex-direction: column;
      align-items: center;
      text-align: center;
    }
  }

  .ids__model-hero-left {
    flex-shrink: 0;
  }

  .ids__model-hero-logo {
    width: var(--ids__logo-xl);
    height: var(--ids__logo-xl);
    border-radius: var(--ids__radius-xl);
    object-fit: cover;
    box-shadow: var(--ids__shadow-m);
  }

  .ids__model-hero-logo--placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--ids__font-size-h1);
    font-weight: var(--ids__font-weight-bold);
    color: var(--ids__bg-page);
    background: linear-gradient(135deg, 
      var(--ids__accent), 
      var(--ids__accent-hover)
    );
  }

  .ids__model-hero-right {
    flex: 1;
  }

  .ids__model-hero-header {
    display: flex;
    align-items: center;
    gap: var(--ids__space-m);
    flex-wrap: wrap;
    margin-bottom: var(--ids__space-s);
  }

  @media (width < 600px) {
    .ids__model-hero-header {
      justify-content: center;
    }
  }

  .ids__model-hero-name {
    margin: 0;
    font-size: var(--ids__font-size-h1);
    font-weight: var(--ids__font-weight-heavy);
    line-height: var(--ids__line-height-tight);
  }

  @media (width < 600px) {
    .ids__model-hero-name {
      font-size: var(--ids__font-size-h1-mobile);
    }
  }

  .ids__model-hero-desc {
    margin: 0 0 var(--ids__space-m) 0;
    font-size: var(--ids__font-size-h4);
    line-height: var(--ids__line-height-relaxed);
    color: var(--ids__text-secondary);
    max-width: 35em;
  }

  .ids__model-hero-meta {
    display: flex;
    flex-wrap: wrap;
    gap: var(--ids__space-s);
  }

  @media (width < 600px) {
    .ids__model-hero-meta {
      justify-content: center;
    }
  }

  .ids__model-hero-actions {
    display: flex;
    gap: var(--ids__space-m);
    flex-wrap: wrap;
  }

  @media (width < 600px) {
    .ids__model-hero-actions {
      justify-content: center;
    }
  }
</style>

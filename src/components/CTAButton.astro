---
/**
 * CTA-кнопка (Call to Action)
 * @prop href - ссылка
 * @prop text - текст кнопки
 * @prop external - внешняя ссылка (default: true)
 * @prop variant - вариант: 'primary' | 'secondary'
 * @prop size - размер: 'S' | 'M' | 'L'
 */
interface Props {
  href: string;
  text?: string;
  external?: boolean;
  variant?: 'primary' | 'secondary';
  size?: 'S' | 'M' | 'L';
  class?: string;
}

const { 
  href, 
  text = 'Перейти на сайт', 
  external = true,
  variant = 'primary',
  size = 'M',
  class: className 
} = Astro.props;

const classes = [
  'ids__cta',
  `ids__cta--${variant}`,
  size !== 'M' && size,
  className
].filter(Boolean).join(' ');

const externalAttrs = external ? { target: '_blank', rel: 'noopener noreferrer sponsored' } : {};
---

<a href={href} class={classes} {...externalAttrs}>
  <span class="ids__cta-text">{text}</span>
  {external && <span class="ids__cta-arrow" aria-hidden="true">→</span>}
</a>

<style>
  .ids__cta {
    display: inline-flex;
    align-items: center;
    gap: var(--ids__space-xs);
    padding: var(--ids__space-s) var(--ids__space-m);
    font-size: var(--ids__font-size-body);
    font-weight: var(--ids__font-weight-semibold);
    text-decoration: none;
    border-radius: var(--ids__radius-s);
    transition: 
      background-color var(--ids__transition-normal),
      transform var(--ids__transition-fast),
      box-shadow var(--ids__transition-normal);
  }

  .ids__cta:hover {
    text-decoration: none;
    transform: translateY(-1px);
  }

  .ids__cta:active {
    transform: translateY(0);
  }

  /* Primary */
  .ids__cta--primary {
    color: var(--ids__bg-page);
    background-color: var(--ids__accent);
  }

  .ids__cta--primary:hover {
    background-color: rgba(var(--ids__accent-RGB), 0.9);
    box-shadow: var(--ids__shadow-accent);
    color: var(--ids__bg-page);
  }

  /* Secondary */
  .ids__cta--secondary {
    color: var(--ids__text-primary);
    background-color: transparent;
    border: 1px solid var(--ids__border-default);
  }

  .ids__cta--secondary:hover {
    background-color: var(--ids__bg-surface);
    border-color: var(--ids__border-strong);
    color: var(--ids__text-primary);
  }

  .ids__cta-arrow {
    transition: transform var(--ids__transition-normal);
  }

  .ids__cta:hover .ids__cta-arrow {
    transform: translateX(3px);
  }

  /* Sizes */
  .ids__cta.S {
    padding: var(--ids__space-xs) var(--ids__space-s);
    font-size: var(--ids__font-size-caption);
  }

  .ids__cta.L {
    padding: var(--ids__space-s) var(--ids__space-l);
    font-size: var(--ids__font-size-h4);
  }
</style>

---
/**
 * Сетка карточек моделей
 * Использует IDS Sequence для консистентности
 */
import ModelCard from './ModelCardSemantic.astro';

interface ModelData {
  slug: string;
  name: string;
  logo?: string;
  rating: number;
  pricing: 'free' | 'freemium' | 'paid';
  priceFrom?: number;
  description: string;
  tagline?: string;
  affiliateUrl: string;
  features?: {
    voice?: boolean;
    nsfw?: boolean;
    russian?: boolean;
    imageGen?: boolean;
    roleplay?: boolean;
    telegram?: boolean;
  };
  featured?: boolean;
}

interface Props {
  models: ModelData[];
  columns?: 2 | 3 | 4;
  class?: string;
}

const { models, columns = 3, class: className } = Astro.props;

const sizeMap: Record<number, string> = {
  2: 'XL',
  3: 'L',
  4: '',
};

const classes = [
  'ids__model-grid',
  `ids__model-grid--cols-${columns}`,
  className
].filter(Boolean).join(' ');
---

<div class={classes}>
  {models.map(model => (
    <div class="ids__model-grid-item">
      <ModelCard model={model} />
    </div>
  ))}
</div>

<style>
  .ids__model-grid {
    display: grid;
    gap: var(--ids__space-m);
  }

  .ids__model-grid--cols-2 {
    grid-template-columns: repeat(2, 1fr);
  }

  .ids__model-grid--cols-3 {
    grid-template-columns: repeat(3, 1fr);
  }

  .ids__model-grid--cols-4 {
    grid-template-columns: repeat(4, 1fr);
  }

  @media (width < 900px) {
    .ids__model-grid--cols-3,
    .ids__model-grid--cols-4 {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (width < 600px) {
    .ids__model-grid--cols-2,
    .ids__model-grid--cols-3,
    .ids__model-grid--cols-4 {
      grid-template-columns: 1fr;
    }
  }

  .ids__model-grid-item {
    display: flex;
  }

  .ids__model-grid-item > :global(*) {
    flex: 1;
  }
</style>

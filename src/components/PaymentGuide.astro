---
/**
 * PaymentGuide ‚Äî —Å–µ–∫—Ü–∏—è "–ö–∞–∫ –æ–ø–ª–∞—Ç–∏—Ç—å –∏–∑ –†–§"
 * 
 * Requirements: 7.1, 7.2, 7.3
 * - –°–µ–∫—Ü–∏—è "–ö–∞–∫ –æ–ø–ª–∞—Ç–∏—Ç—å –∏–∑ –†–§"
 * - –£—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç –∫–∞—Ä—Ç –†–§)
 */

interface Props {
  paymentMethods: ('mir' | 'sbp' | 'crypto' | 'foreign_card')[];
  customGuide?: string;
  serviceName: string;
}

const { paymentMethods, customGuide, serviceName } = Astro.props;

// Requirement 7.3: –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ—Å–ª–∏ –µ—Å—Ç—å –∫–∞—Ä—Ç—ã –†–§
const hasRussianPayment = paymentMethods.includes('mir') || paymentMethods.includes('sbp');

// –î–µ—Ñ–æ–ª—Ç–Ω—ã–π –≥–∞–π–¥ –µ—Å–ª–∏ –Ω–µ—Ç –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ
const defaultGuide = `
## –ö–∞–∫ –æ–ø–ª–∞—Ç–∏—Ç—å ${serviceName} –∏–∑ –†–æ—Å—Å–∏–∏

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, ${serviceName} –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–∞—Ä—Ç—ã —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –±–∞–Ω–∫–æ–≤ –Ω–∞–ø—Ä—è–º—É—é. –í–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤ –æ–ø–ª–∞—Ç–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É:

### 1. –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º)
- –ö—É–ø–∏—Ç–µ USDT –Ω–∞ –±–∏—Ä–∂–µ (Bybit, OKX, Binance P2P)
- –û–ø–ª–∞—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ –∫—Ä–∏–ø—Ç–æ—à–ª—é–∑ –Ω–∞ —Å–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å–∞

### 2. –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞
- **Pyypl** (–û–ê–≠) ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–∞—Å–ø–æ—Ä—Ç—É
- **Wise** ‚Äî –Ω—É–∂–µ–Ω –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- **Payoneer** ‚Äî –¥–ª—è —Ñ—Ä–∏–ª–∞–Ω—Å–µ—Ä–æ–≤

### 3. –ß–µ—Ä–µ–∑ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–∞
- –ü–æ–ø—Ä–æ—Å–∏—Ç–µ –¥—Ä—É–≥–∞ –∑–∞ –≥—Ä–∞–Ω–∏—Ü–µ–π –æ–ø–ª–∞—Ç–∏—Ç—å
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å—ã —Ç–∏–ø–∞ Enot.io
`;

const guideContent = customGuide || defaultGuide;
---

{!hasRussianPayment && (
  <section class="payment-guide">
    <div class="payment-guide__header">
      <span class="payment-guide__icon">üí≥</span>
      <h2 class="payment-guide__title">–ö–∞–∫ –æ–ø–ª–∞—Ç–∏—Ç—å –∏–∑ –†–§</h2>
    </div>
    <div class="payment-guide__content" set:html={guideContent} />
    
    {paymentMethods.includes('crypto') && (
      <div class="payment-guide__tip">
        <span class="payment-guide__tip-icon">üí°</span>
        <p class="payment-guide__tip-text">
          –≠—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—É ‚Äî —ç—Ç–æ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã –∏–∑ –†–§.
        </p>
      </div>
    )}
  </section>
)}

<style>
  .payment-guide {
    padding: var(--ids__space-l);
    background: var(--ids__bg-surface);
    border: 1px solid var(--ids__border-default);
    border-radius: var(--ids__radius-l);
    margin: var(--ids__space-xl) 0;
  }

  .payment-guide__header {
    display: flex;
    align-items: center;
    gap: var(--ids__space-s);
    margin-bottom: var(--ids__space-m);
  }

  .payment-guide__icon {
    font-size: var(--ids__font-size-h2);
  }

  .payment-guide__title {
    margin: 0;
    font-size: var(--ids__font-size-h3);
    font-weight: var(--ids__font-weight-bold);
    color: var(--ids__text-primary);
  }

  .payment-guide__content {
    font-size: var(--ids__font-size-small);
    color: var(--ids__text-secondary);
    line-height: var(--ids__line-height-relaxed);
  }

  .payment-guide__content :global(h2) {
    display: none; /* –°–∫—Ä—ã–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏–∑ markdown, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–≤–æ–π */
  }

  .payment-guide__content :global(h3) {
    font-size: var(--ids__font-size-h4);
    font-weight: var(--ids__font-weight-semibold);
    color: var(--ids__text-primary);
    margin: var(--ids__space-m) 0 var(--ids__space-xs);
  }

  .payment-guide__content :global(ul) {
    margin: var(--ids__space-xs) 0;
    padding-left: var(--ids__space-m);
  }

  .payment-guide__content :global(li) {
    margin-bottom: var(--ids__space-2xs);
  }

  .payment-guide__content :global(strong) {
    color: var(--ids__text-primary);
  }

  .payment-guide__tip {
    display: flex;
    gap: var(--ids__space-s);
    padding: var(--ids__space-s) var(--ids__space-m);
    background: var(--ids__bg-accent-subtle);
    border-radius: var(--ids__radius-s);
    margin-top: var(--ids__space-m);
  }

  .payment-guide__tip-icon {
    font-size: var(--ids__font-size-body);
    flex-shrink: 0;
  }

  .payment-guide__tip-text {
    margin: 0;
    font-size: var(--ids__font-size-small);
    color: var(--ids__text-primary);
  }
</style>

---
/**
 * Таблица характеристик модели
 */
interface Features {
  voice?: boolean;
  nsfw?: boolean;
  russian?: boolean;
  imageGen?: boolean;
  roleplay?: boolean;
  api?: boolean;
}

interface Props {
  features: Features;
  pricing: 'free' | 'freemium' | 'paid';
  priceFrom?: number;
  class?: string;
}

const { features, pricing, priceFrom, class: className } = Astro.props;
const classes = ['aigh__feature-table', className].filter(Boolean).join(' ');

const featureLabels: Record<string, string> = {
  voice: 'Голосовое общение',
  nsfw: 'NSFW-контент',
  russian: 'Русский язык',
  imageGen: 'Генерация изображений',
  roleplay: 'Ролевые игры',
  api: 'API доступ',
};

const pricingLabels: Record<string, string> = {
  free: 'Бесплатно',
  freemium: 'Freemium',
  paid: 'Платный',
};

const featureEntries = Object.entries(featureLabels);
---

<div class={classes}>
  <table>
    <tbody>
      <tr>
        <td class="aigh__feature-table-label">Тип</td>
        <td class="aigh__feature-table-value">
          {pricingLabels[pricing]}
          {priceFrom && <span class="aigh__feature-table-price"> (от ${priceFrom}/мес)</span>}
        </td>
      </tr>
      {featureEntries.map(([key, label]) => (
        <tr>
          <td class="aigh__feature-table-label">{label}</td>
          <td class="aigh__feature-table-value">
            {features[key as keyof Features] ? (
              <span class="aigh__feature-table-yes">✓ Да</span>
            ) : (
              <span class="aigh__feature-table-no">✗ Нет</span>
            )}
          </td>
        </tr>
      ))}
    </tbody>
  </table>
</div>

<style>
  .aigh__feature-table {
    background-color: rgba(var(--ids__surface-RGB), 0.5);
    border-radius: 0.5em;
    overflow: hidden;
  }

  .aigh__feature-table table {
    width: 100%;
    border-collapse: collapse;
  }

  .aigh__feature-table tr {
    border-bottom: 1px solid rgba(var(--ids__text-RGB), 0.06);
  }

  .aigh__feature-table tr:last-child {
    border-bottom: none;
  }

  .aigh__feature-table td {
    padding: calc(var(--ids__density) * 0.6em) calc(var(--ids__density) * 0.8em);
    font-size: 0.95em;
    border: none;
  }

  .aigh__feature-table-label {
    width: 50%;
    color: rgba(var(--ids__text-RGB), 0.7);
  }

  .aigh__feature-table-value {
    font-weight: 500;
  }

  .aigh__feature-table-price {
    font-weight: 400;
    color: rgba(var(--ids__text-RGB), 0.6);
  }

  .aigh__feature-table-yes {
    color: rgb(0, 140, 70);
  }

  .aigh__feature-table-no {
    color: rgba(var(--ids__text-RGB), 0.4);
  }
</style>

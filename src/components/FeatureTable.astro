---
/**
 * Таблица характеристик модели
 */
interface Features {
  voice?: boolean;
  nsfw?: boolean;
  russian?: boolean;
  imageGen?: boolean;
  roleplay?: boolean;
  api?: boolean;
}

interface Props {
  features: Features;
  pricing: 'free' | 'freemium' | 'paid';
  priceFrom?: number;
  class?: string;
}

const { features, pricing, priceFrom, class: className } = Astro.props;
const classes = ['ids__feature-table', className].filter(Boolean).join(' ');

const featureLabels: Record<string, string> = {
  voice: 'Голосовое общение',
  nsfw: 'NSFW-контент',
  russian: 'Русский язык',
  imageGen: 'Генерация изображений',
  roleplay: 'Ролевые игры',
  api: 'API доступ',
};

const pricingLabels: Record<string, string> = {
  free: 'Бесплатно',
  freemium: 'Freemium',
  paid: 'Платный',
};

const featureEntries = Object.entries(featureLabels);
---

<div class={classes}>
  <table>
    <tbody>
      <tr>
        <td class="ids__feature-table-label">Тип</td>
        <td class="ids__feature-table-value">
          {pricingLabels[pricing]}
          {priceFrom && <span class="ids__feature-table-price"> (от ${priceFrom}/мес)</span>}
        </td>
      </tr>
      {featureEntries.map(([key, label]) => (
        <tr>
          <td class="ids__feature-table-label">{label}</td>
          <td class="ids__feature-table-value">
            {features[key as keyof Features] ? (
              <span class="ids__feature-table-yes">✓ Да</span>
            ) : (
              <span class="ids__feature-table-no">✗ Нет</span>
            )}
          </td>
        </tr>
      ))}
    </tbody>
  </table>
</div>

<style>
  .ids__feature-table {
    background-color: var(--ids__bg-surface);
    border-radius: var(--ids__radius-s);
    overflow: hidden;
  }

  .ids__feature-table table {
    width: 100%;
    border-collapse: collapse;
  }

  .ids__feature-table tr {
    border-bottom: 1px solid var(--ids__border-subtle);
  }

  .ids__feature-table tr:last-child {
    border-bottom: none;
  }

  .ids__feature-table td {
    padding: var(--ids__space-s) var(--ids__space-m);
    font-size: var(--ids__font-size-small);
    border: none;
  }

  .ids__feature-table-label {
    width: 50%;
    color: var(--ids__text-secondary);
  }

  .ids__feature-table-value {
    font-weight: var(--ids__font-weight-medium);
  }

  .ids__feature-table-price {
    font-weight: var(--ids__font-weight-regular);
    color: var(--ids__text-tertiary);
  }

  .ids__feature-table-yes {
    color: var(--ids__success);
  }

  .ids__feature-table-no {
    color: var(--ids__text-muted);
  }
</style>

---
/**
 * Hero-секция для страницы сравнения
 * Показывает две модели рядом
 */
import RatingStars from './RatingStars.astro';
import PriceBadge from './PriceBadge.astro';
import CTAButton from './CTAButton.astro';
import { url } from '../utils/url';

interface ModelData {
  slug: string;
  name: string;
  logo?: string;
  rating: number;
  pricing: 'free' | 'freemium' | 'paid';
  priceFrom?: number;
  description: string;
  affiliateUrl: string;
}

interface Props {
  modelA: ModelData;
  modelB: ModelData;
  class?: string;
}

const { modelA, modelB, class: className } = Astro.props;
const classes = ['aigh__compare-hero', className].filter(Boolean).join(' ');
---

<div class={classes}>
  <!-- Model A -->
  <div class="aigh__compare-hero-card">
    <div class="aigh__compare-hero-header">
      {modelA.logo ? (
        <img src={modelA.logo} alt={modelA.name} class="aigh__compare-hero-logo" />
      ) : (
        <div class="aigh__compare-hero-logo aigh__compare-hero-logo--placeholder">
          {modelA.name.charAt(0)}
        </div>
      )}
    </div>
    <h2 class="aigh__compare-hero-name">
      <a href={url(`/models/${modelA.slug}`)}>{modelA.name}</a>
    </h2>
    <RatingStars rating={modelA.rating} />
    <PriceBadge pricing={modelA.pricing} priceFrom={modelA.priceFrom} />
    <p class="aigh__compare-hero-desc">{modelA.description}</p>
    <CTAButton href={modelA.affiliateUrl} text="Попробовать" size="S" />
  </div>

  <!-- VS -->
  <div class="aigh__compare-hero-vs">
    <span>VS</span>
  </div>

  <!-- Model B -->
  <div class="aigh__compare-hero-card">
    <div class="aigh__compare-hero-header">
      {modelB.logo ? (
        <img src={modelB.logo} alt={modelB.name} class="aigh__compare-hero-logo" />
      ) : (
        <div class="aigh__compare-hero-logo aigh__compare-hero-logo--placeholder">
          {modelB.name.charAt(0)}
        </div>
      )}
    </div>
    <h2 class="aigh__compare-hero-name">
      <a href={url(`/models/${modelB.slug}`)}>{modelB.name}</a>
    </h2>
    <RatingStars rating={modelB.rating} />
    <PriceBadge pricing={modelB.pricing} priceFrom={modelB.priceFrom} />
    <p class="aigh__compare-hero-desc">{modelB.description}</p>
    <CTAButton href={modelB.affiliateUrl} text="Попробовать" size="S" />
  </div>
</div>

<style>
  .aigh__compare-hero {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: calc(var(--ids__density) * 1em);
    align-items: start;
  }

  @media (width < 700px) {
    .aigh__compare-hero {
      grid-template-columns: 1fr;
      gap: calc(var(--ids__density) * 0.5em);
    }
  }

  .aigh__compare-hero-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: calc(var(--ids__density) * 1.5em);
    background-color: rgb(var(--ids__background-RGB));
    border: 1px solid rgba(var(--ids__text-RGB), 0.08);
    border-radius: var(--ids__radius);
    gap: 0.6em;
  }

  .aigh__compare-hero-header {
    margin-bottom: 0.5em;
  }

  .aigh__compare-hero-logo {
    width: 5em;
    height: 5em;
    border-radius: 1em;
    object-fit: cover;
    box-shadow: 0 4px 16px rgba(var(--ids__text-RGB), 0.1);
  }

  .aigh__compare-hero-logo--placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2em;
    font-weight: 600;
    color: rgb(var(--ids__background-RGB));
    background: linear-gradient(135deg, 
      rgb(var(--ids__accent-RGB)), 
      rgba(var(--ids__accent-RGB), 0.7)
    );
  }

  .aigh__compare-hero-name {
    margin: 0;
    font-size: 1.4em;
    font-weight: 600;
  }

  .aigh__compare-hero-name a {
    color: rgb(var(--ids__text-RGB));
    text-decoration: none;
  }

  .aigh__compare-hero-name a:hover {
    color: rgb(var(--ids__link-RGB));
  }

  .aigh__compare-hero-desc {
    margin: 0;
    font-size: 0.9em;
    line-height: 1.4;
    color: rgba(var(--ids__text-RGB), 0.65);
    max-width: 20em;
  }

  .aigh__compare-hero-vs {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1em;
  }

  .aigh__compare-hero-vs span {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 3em;
    height: 3em;
    font-size: 1.2em;
    font-weight: 700;
    color: rgb(var(--ids__background-RGB));
    background-color: var(--ids__accent);
    border-radius: 50%;
  }

  @media (width < 700px) {
    .aigh__compare-hero-vs {
      padding: 0.5em;
    }

    .aigh__compare-hero-vs span {
      width: 2.5em;
      height: 2.5em;
      font-size: 1em;
    }
  }
</style>

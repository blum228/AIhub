---
/**
 * Hero-секция для страницы сравнения
 * Показывает две модели рядом
 */
import RatingStars from './RatingStars.astro';
import PriceBadge from './PriceBadge.astro';
import CTAButton from './CTAButton.astro';
import { url } from '../utils/url';

interface ModelData {
  slug: string;
  name: string;
  logo?: string;
  rating: number;
  pricing: 'free' | 'freemium' | 'paid';
  priceFrom?: number;
  description: string;
  affiliateUrl: string;
}

interface Props {
  modelA: ModelData;
  modelB: ModelData;
  class?: string;
}

const { modelA, modelB, class: className } = Astro.props;
const classes = ['ids__compare-hero', className].filter(Boolean).join(' ');
---

<div class={classes}>
  <!-- Model A -->
  <div class="ids__compare-hero-card">
    <div class="ids__compare-hero-header">
      {modelA.logo ? (
        <img src={modelA.logo} alt={modelA.name} class="ids__compare-hero-logo" />
      ) : (
        <div class="ids__compare-hero-logo ids__compare-hero-logo--placeholder">
          {modelA.name.charAt(0)}
        </div>
      )}
    </div>
    <h2 class="ids__compare-hero-name">
      <a href={url(`/models/${modelA.slug}`)}>{modelA.name}</a>
    </h2>
    <RatingStars rating={modelA.rating} />
    <PriceBadge pricing={modelA.pricing} priceFrom={modelA.priceFrom} />
    <p class="ids__compare-hero-desc">{modelA.description}</p>
    <CTAButton href={modelA.affiliateUrl} text="Попробовать" size="S" />
  </div>

  <!-- VS -->
  <div class="ids__compare-hero-vs">
    <span>VS</span>
  </div>

  <!-- Model B -->
  <div class="ids__compare-hero-card">
    <div class="ids__compare-hero-header">
      {modelB.logo ? (
        <img src={modelB.logo} alt={modelB.name} class="ids__compare-hero-logo" />
      ) : (
        <div class="ids__compare-hero-logo ids__compare-hero-logo--placeholder">
          {modelB.name.charAt(0)}
        </div>
      )}
    </div>
    <h2 class="ids__compare-hero-name">
      <a href={url(`/models/${modelB.slug}`)}>{modelB.name}</a>
    </h2>
    <RatingStars rating={modelB.rating} />
    <PriceBadge pricing={modelB.pricing} priceFrom={modelB.priceFrom} />
    <p class="ids__compare-hero-desc">{modelB.description}</p>
    <CTAButton href={modelB.affiliateUrl} text="Попробовать" size="S" />
  </div>
</div>

<style>
  .ids__compare-hero {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: var(--ids__space-m);
    align-items: start;
  }

  @media (width < 700px) {
    .ids__compare-hero {
      grid-template-columns: 1fr;
      gap: var(--ids__space-s);
    }
  }

  .ids__compare-hero-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: var(--ids__space-l);
    background-color: var(--ids__bg-page);
    border: 1px solid var(--ids__border-subtle);
    border-radius: var(--ids__radius-m);
    gap: var(--ids__space-s);
  }

  .ids__compare-hero-header {
    margin-bottom: var(--ids__space-s);
  }

  .ids__compare-hero-logo {
    width: var(--ids__logo-l);
    height: var(--ids__logo-l);
    border-radius: var(--ids__radius-xl);
    object-fit: cover;
    box-shadow: var(--ids__shadow-m);
  }

  .ids__compare-hero-logo--placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--ids__font-size-h1);
    font-weight: var(--ids__font-weight-bold);
    color: var(--ids__bg-page);
    background: linear-gradient(135deg, 
      var(--ids__accent), 
      var(--ids__accent-hover)
    );
  }

  .ids__compare-hero-name {
    margin: 0;
    font-size: var(--ids__font-size-h2);
    font-weight: var(--ids__font-weight-bold);
  }

  .ids__compare-hero-name a {
    color: var(--ids__text-primary);
    text-decoration: none;
  }

  .ids__compare-hero-name a:hover {
    color: var(--ids__link);
  }

  .ids__compare-hero-desc {
    margin: 0;
    font-size: var(--ids__font-size-small);
    line-height: var(--ids__line-height-snug);
    color: var(--ids__text-tertiary);
    max-width: 20em;
  }

  .ids__compare-hero-vs {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--ids__space-m);
  }

  .ids__compare-hero-vs span {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 3em;
    height: 3em;
    font-size: var(--ids__font-size-h3);
    font-weight: var(--ids__font-weight-heavy);
    color: var(--ids__bg-page);
    background-color: var(--ids__accent);
    border-radius: var(--ids__radius-full);
  }

  @media (width < 700px) {
    .ids__compare-hero-vs {
      padding: var(--ids__space-s);
    }

    .ids__compare-hero-vs span {
      width: 2.5em;
      height: 2.5em;
      font-size: var(--ids__font-size-body);
    }
  }
</style>
